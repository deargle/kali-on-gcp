# https://github.com/mitchellh/vagrant-google
Vagrant.configure("2") do |config|

  config.vm.define "gcp" do |gcp|
    gcp.vm.box = "google/gce" # dummy gcp vagrantbox provided by atlas
    config.vm.provider :google do |google, override|
      google.google_project_id = "infosec-management-322423"
      google.google_json_key_location = "../account.json"
      google.image_family = "kali-rolling-gcpized-nestedvm"
      google.name = "kali-v3"
      google.disk_size = 500                  # the more disk space you give
                                               # your instance, the faster allotment
                                               # GCP will give for its read/write
      google.machine_type = "n1-standard-4"

      override.ssh.username = 'provisioner'
      override.ssh.private_key_path = 'id_rsa' # in this case, my `id_rsa` file
                                               # is in the same directory as this
                                               # Vagrantfile
    end
  end

  config.vm.provision "shell", path: "scripts/install-chrome-remote-desktop.sh"
  config.vm.provision "shell", path: "scripts/all-passwordless-sudo.sh"
  config.vm.provision "shell", path: "scripts/set-hostname-kali.sh"

  config.vm.provision "shell", path: "scripts/pulseaudio.sh"
  config.vm.provision "shell", path: "scripts/install-nessus.sh"
  config.vm.provision "shell", path: "scripts/install-misc-packages.sh"
  config.vm.provision "shell", path: "scripts/install-social-engineer-toolkit.sh"

  config.vm.provision "shell", path: "scripts/install-virtmanager.sh"
  config.vm.provision "shell", path: "scripts/install-vagrant.sh"
  config.vm.provision "shell", path: "scripts/vagrant-add-ms2.sh"
  config.vm.provision "shell", path: "scripts/vagrant-add-so.sh"
  config.vm.provision "shell", path: "scripts/vagrant-add-server2019.sh"
end
